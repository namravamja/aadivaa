generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Buyer {
  id                    String    @id @default(uuid())
  email                 String    @unique
  password              String
  firstName             String?
  lastName              String?
  phone                 String?
  avatar                String?
  dateOfBirth           DateTime?
  gender                String?
  addresses             Address[]
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  isAuthenticated       Boolean   @default(false)
  forgotPasswordToken   String?   @unique
  forgotPasswordExpires DateTime?
  verifyToken           String?   @unique
  verifyExpires         DateTime?
  isVerified            Boolean   @default(false)
}

model Address {
  id         Int     @id @default(autoincrement())
  firstName  String
  lastName   String
  company    String? // Optional
  street     String?
  apartment  String? // Optional
  city       String
  state      String
  postalCode String
  country    String
  phone      String?
  buyer      Buyer   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId     String
  isDefault  Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("buyer_addresses")
}

model Artist {
  id                         String   @id @default(uuid())
  fullName                   String?
  storeName                  String?
  email                      String   @unique
  mobile                     String?
  password                   String
  confirmPassword            String?
  businessType               String?
  businessRegistrationNumber String?
  productCategories          String[] // Prisma supports array of strings
  businessLogo               String?

  businessAddress   BusinessAddress? @relation(fields: [businessAddressId], references: [id])
  businessAddressId String?          @unique

  warehouseAddress   WarehouseAddress? @relation(fields: [warehouseAddressId], references: [id])
  warehouseAddressId String?           @unique

  bankAccountName String?
  bankName        String?
  accountNumber   String?
  ifscCode        String?
  upiId           String?
  gstNumber       String?
  panNumber       String?

  documents   Documents? @relation(fields: [documentsId], references: [id])
  documentsId String?    @unique

  shippingType    String?
  serviceAreas    String[]
  inventoryVolume String?
  supportContact  String?
  returnPolicy    String?
  workingHours    String?

  socialLinks   SocialLinks? @relation(fields: [socialLinksId], references: [id])
  socialLinksId String?      @unique

  termsAgreed      Boolean?
  digitalSignature String?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime? @updatedAt
  isAuthenticated  Boolean   @default(false)

  forgotPasswordToken   String?   @unique
  forgotPasswordExpires DateTime?
  verifyToken           String?   @unique
  verifyExpires         DateTime?
  isVerified            Boolean   @default(false)
}

model BusinessAddress {
  id      String  @id @default(uuid())
  street  String?
  city    String?
  state   String?
  country String?
  pinCode String?

  artist Artist?
}

model WarehouseAddress {
  id             String   @id @default(uuid())
  sameAsBusiness Boolean?
  street         String?
  city           String?
  state          String?
  country        String?
  pinCode        String?

  artist Artist?
}

model Documents {
  id              String  @id @default(uuid())
  gstCertificate  String?
  panCard         String?
  businessLicense String?
  canceledCheque  String?

  artist Artist?
}

model SocialLinks {
  id        String  @id @default(uuid())
  website   String?
  instagram String?
  facebook  String?
  twitter   String?

  artist Artist?
}
